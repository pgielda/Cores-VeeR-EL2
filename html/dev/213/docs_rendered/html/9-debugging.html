

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>9 VeeR EL2 Debug Support - RISC-V VeeR EL2 Programmer's Reference Manual  documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.af531f03affe68837.min.css?v=2410bb73" />
        <link rel="stylesheet" type="text/css" href="_static/main.css" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-header__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RISC-V VeeR EL2 Programmer's Reference Manual  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              9 VeeR EL2 Debug Support
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RISC-V VeeR EL2 Programmer&#39;s Reference Manual  documentation" class="md-nav__button md-logo" aria-label="RISC-V VeeR EL2 Programmer's Reference Manual  documentation" data-md-component="logo">
      <img src="_static/white.svg" alt="logo">
    </a>
    RISC-V VeeR EL2 Programmer's Reference Manual  documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="0-intro.html" class="md-nav__link">
        <span class="md-ellipsis">RISC-<wbr>V Vee<wbr>R EL2 Programmer’s Reference Manual</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="1-overview.html" class="md-nav__link">
        <span class="md-ellipsis">1 Vee<wbr>R EL2 Core Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="2-memory-map.html" class="md-nav__link">
        <span class="md-ellipsis">2 Memory Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="3-error-protection.html" class="md-nav__link">
        <span class="md-ellipsis">3 Memory Error Protection</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="4-timers.html" class="md-nav__link">
        <span class="md-ellipsis">4 Internal Timers</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="5-power.html" class="md-nav__link">
        <span class="md-ellipsis">5 Power Management and Multi-<wbr>Core Debug Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="6-interrupts.html" class="md-nav__link">
        <span class="md-ellipsis">6 External Interrupts</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="7-performance.html" class="md-nav__link">
        <span class="md-ellipsis">7 Performance Monitoring</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="8-cache.html" class="md-nav__link">
        <span class="md-ellipsis">8 Cache Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">9 Vee<wbr>R EL2 Debug Support</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">9 Vee<wbr>R EL2 Debug Support</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#control-status-registers" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1 Control/Status Registers</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1 Control/Status Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#control-status-registers-in-jtag-address-space" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>1 Control/Status Registers in JTAG Address Space</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1.1 Control/Status Registers in JTAG Address Space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#idcode-register-idcode" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>1.<wbr>1 IDCODE Register <wbr>(IDCODE)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dtm-control-and-status-register-dtmcs" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>1.<wbr>2 DTM Control and Status Register <wbr>(dtmcs)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-module-interface-access-register-dmi" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>1.<wbr>3 Debug Module Interface Access Register <wbr>(dmi)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bypass-register-bypass" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>1.<wbr>4 BYPASS Register <wbr>(BYPASS)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-status-registers-in-debug-module-interface-address-space" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2 Control/Status Registers in Debug Module Interface Address Space</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-module-control-register-dmcontrol" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>1 Debug Module Control Register <wbr>(dmcontrol)</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1.2.1 Debug Module Control Register (dmcontrol)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debug-module-status-register-dmstatus" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>2 Debug Module Status Register <wbr>(dmstatus)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#halt-summary-0-register-haltsum0" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>3 Halt Summary 0 Register <wbr>(haltsum0)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-control-and-status-register-abstractcs" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>4 Abstract Control and Status Register <wbr>(abstractcs)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-command-register-command" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>5 Abstract Command Register <wbr>(command)</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1.2.5 Abstract Command Register (command)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abstract-command-autoexec-register-abstractauto" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>6 Abstract Command Autoexec Register <wbr>(abstractauto)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract-data-0-1-registers-data0-1" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>7 Abstract Data 0 / 1 Registers <wbr>(data0/1)</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1.2.7 Abstract Data 0 / 1 Registers (data0/1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-bus-access-control-and-status-register-sbcs" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>8 System Bus Access Control and Status Register <wbr>(sbcs)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-bus-address-31-0-register-sbaddress0" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>9 System Bus Address 31:<wbr>0 Register <wbr>(sbaddress0)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-bus-data-31-0-register-sbdata0" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>10 System Bus Data 31:<wbr>0 Register <wbr>(sbdata0)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-bus-data-63-32-register-sbdata1" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>2.<wbr>11 System Bus Data 63:<wbr>32 Register <wbr>(sbdata1)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-status-registers-in-risc-v-csr-address-space" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3 Control/Status Registers in RISC-<wbr>V CSR Address Space</span>
  </a>
  
    <nav class="md-nav" aria-label="9.1.3 Control/Status Registers in RISC-V CSR Address Space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trigger-select-register-tselect" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>1 Trigger Select Register <wbr>(tselect)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-data-1-register-tdata1" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>2 Trigger Data 1 Register <wbr>(tdata1)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-control-register-mcontrol" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>3 Match Control Register <wbr>(mcontrol)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-data-2-register-tdata2" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>4 Trigger Data 2 Register <wbr>(tdata2)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-control-and-status-register-dcsr" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>5 Debug Control and Status Register <wbr>(dcsr)</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-pc-register-dpc" class="md-nav__link">
    <span class="md-ellipsis">9.<wbr>1.<wbr>3.<wbr>6 Debug PC Register <wbr>(dpc)</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="10-core-control.html" class="md-nav__link">
        <span class="md-ellipsis">10 Low-<wbr>Level Core Control</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="11-adaptations.html" class="md-nav__link">
        <span class="md-ellipsis">11 Standard RISC-<wbr>V CSRs with Core-<wbr>Specific Adaptations</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="12-csrs.html" class="md-nav__link">
        <span class="md-ellipsis">12 CSR Address Map</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="13-interrupt-priority.html" class="md-nav__link">
        <span class="md-ellipsis">13 Interrupt Priorities</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="14-clocks.html" class="md-nav__link">
        <span class="md-ellipsis">14 Clock And Reset</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="15-complex-ports.html" class="md-nav__link">
        <span class="md-ellipsis">15 Vee<wbr>R EL2 Core Complex Port List</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="16-build-args.html" class="md-nav__link">
        <span class="md-ellipsis">16 Vee<wbr>R EL2 Core Build Arguments</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="17-tests.html" class="md-nav__link">
        <span class="md-ellipsis">17 Vee<wbr>R EL2 Compliance Test Suite Failures</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="18-errata.html" class="md-nav__link">
        <span class="md-ellipsis">18 Vee<wbr>R EL2 Errata</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="veer-el2-debug-support">9 VeeR EL2 Debug Support<a class="headerlink" href="#veer-el2-debug-support" title="Link to this heading">¶</a></h1>
<p>The VeeR EL2 core conforms to the “RISC-V Debug Specification 0.13.2, with JTAG DTM” document [3].
This chapter provides a description of the implemented debug-related control and status register definitions.
For a RISC-V debug overview and detailed feature descriptions, refer to corresponding sections in [3].</p>
<h2 id="control-status-registers">9.1 Control/Status Registers<a class="headerlink" href="#control-status-registers" title="Link to this heading">¶</a></h2>
<p>The RISC-V Debug architecture defines three separate address spaces: JTAG, Debug Module Interface, and RISC-V CSR.
The registers associated with these three address spaces are described in the following sections:</p>
<ul class="simple">
<li><p>Control/Status Registers in JTAG Address Space (see Section 9.1.1)</p></li>
<li><p>Control/Status Registers in Debug Module Interface Address Space (see Section 9.1.2)</p></li>
<li><p>Control/Status Registers in RISC-V CSR Address Space (see Section 9.1.3)</p></li>
</ul>
<h3 id="control-status-registers-in-jtag-address-space">9.1.1 Control/Status Registers in JTAG Address Space<a class="headerlink" href="#control-status-registers-in-jtag-address-space" title="Link to this heading">¶</a></h3>
<p>Table 9-1 summarizes the control/status registers in the JTAG Debug Transport Module address space.</p>
<p>Addresses shown below are in the 5-bit JTAG address space.
A control/status register is addressed by setting the 5bit JTAG IR register.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The core complex clock (clk) frequency must be at least twice the JTAG clock (jtag_tck) frequency for the JTAG data to pass correctly through the clock domain crossing synchronizers.</p>
</div>
<table class="docutils data align-default" id="id1">
<caption><span class="caption-text">Table 9-1 Registers in JTAG Debug Transport Module Address Space</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>JTAG DTM</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Section</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Address 0x01</p></td>
<td><p>IDCODE</p></td>
<td><p>JTAG IDCODE</p></td>
<td><p>9.1.1.1</p></td>
</tr>
<tr class="row-odd"><td><p>0x10</p></td>
<td><p>dtmcs</p></td>
<td><p>DTM control and status</p></td>
<td><p>9.1.1.2</p></td>
</tr>
<tr class="row-even"><td><p>0x11</p></td>
<td><p>dmi</p></td>
<td><p>Debug module interface access</p></td>
<td><p>9.1.1.3</p></td>
</tr>
<tr class="row-odd"><td><p>0x1F</p></td>
<td><p>BYPASS</p></td>
<td><p>JTAG BYPASS</p></td>
<td><p>9.1.1.4</p></td>
</tr>
</tbody>
</table>
<h4 id="idcode-register-idcode">9.1.1.1 IDCODE Register (IDCODE)<a class="headerlink" href="#idcode-register-idcode" title="Link to this heading">¶</a></h4>
<p>The IDCODE register is a standard JTAG register.
It is selected in the JTAG TAP controller’s IR register when the TAP state machine is reset.
The IDCODE register’s definition is exactly as defined in IEEE Std 1149.1-2013.</p>
<p>This register is read-only.</p>
<p>This register is mapped to the 5-bit JTAG address space.</p>
<table class="docutils data align-default" id="id2">
<caption><span class="caption-text">Table 9-2 IDCODE Register (IDCODE, at JTAG 0x01)</span><a class="headerlink" href="#id2" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>version</p></td>
<td><p>31:28</p></td>
<td><p>Identifies release version of this part</p></td>
<td><p>R</p></td>
<td><p>jtag_id[31:28]</p></td>
</tr>
<tr class="row-odd"><td><p>partnum</p></td>
<td><p>27:12</p></td>
<td><p>Identifies designer’s part number of this part</p></td>
<td><p>R</p></td>
<td><p>jtag_id[27:12]</p></td>
</tr>
<tr class="row-even"><td><p>manufid</p></td>
<td><p>11:1</p></td>
<td><p>Identifies designer/manufacturer of this part</p></td>
<td><p>R</p></td>
<td><p>jtag_id[11:1]</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>Must be ‘1’</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<h4 id="dtm-control-and-status-register-dtmcs">9.1.1.2 DTM Control and Status Register (dtmcs)<a class="headerlink" href="#dtm-control-and-status-register-dtmcs" title="Link to this heading">¶</a></h4>
<p>The dtmcs register controls and provides status of the Debug Transport Module (DTM).</p>
<p>This register is mapped to the 5-bit JTAG address space.</p>
<table class="docutils data align-default" id="id3">
<caption><span class="caption-text">Table 9-3 DTM Control and Status Register (dtmcs, at JTAG 0x10)</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:18</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>dmihardreset</p></td>
<td><p>17</p></td>
<td><p>Not implemented Note: Hard reset of DTM not required in VeeR EL2 because DMI accesses always succeed. Writes to this bit ignored.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>dmireset</p></td>
<td><p>16</p></td>
<td><p>Not implemented Note: Reset of DTM’s error state not required in VeeR EL2 because DMI accesses always succeed. Writes to this bit ignored.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>15</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>idle</p></td>
<td><p>14:12</p></td>
<td><p>Hint to debugger of minimum number of cycles debugger should spend in Run-Test/Idle after every DMI scan to avoid a ‘busy’ return code (dmistat of 3). Debugger must still check dmistat when necessary: 0: Not necessary to enter Run-Test/Idle at all. Other values not implemented.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>dmistat</p></td>
<td><p>11:10</p></td>
<td><p>DMI status: 0: No error 1: Reserved 2..3: Not implemented (DMI accesses always succeed)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>abits</p></td>
<td><p>9:4</p></td>
<td><p>Size of address field in dmi register (see Table 9-4)</p></td>
<td><p>R</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-odd"><td><p>version</p></td>
<td><p>3:0</p></td>
<td><p>Conforming to RISC-V Debug specification Version 0.13.2</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<h4 id="debug-module-interface-access-register-dmi">9.1.1.3 Debug Module Interface Access Register (dmi)<a class="headerlink" href="#debug-module-interface-access-register-dmi" title="Link to this heading">¶</a></h4>
<p>The dmi register allows access to the Debug Module Interface (DMI).
In the JTAG TAP controller’s Update-DR state, the DTM starts the operation specified in the op field.
In the JTAG TAP controller’s Capture-DR state, the DTM updates the <em>data</em> field with the result from that operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No status is reported in the op field. Therefore, debuggers should refrain from batching together multiple scans.</p>
</div>
<p>This register is mapped to the 5-bit JTAG address space.</p>
<table class="docutils data align-default" id="id4">
<caption><span class="caption-text">Table 9-4 Debug Module Interface Access Register (dmi, at JTAG 0x11)</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>address</p></td>
<td><p>40:34</p></td>
<td><p>Address used for DMI access. In Update-DR, value used to access DM over DMI.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>data</p></td>
<td><p>33:2</p></td>
<td><p>Data to send to DM over DMI during Update-DR, and data returned from DM as result of previous operation.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>op</p></td>
<td><p>1:0</p></td>
<td><p>For write: <br> 0: Ignore data and address (nop) <br>1: Read from address (read) <br>2: Write data to address (write) <br>3: Not implemented (do not use) <br>For read: <br>0: Previous operation completed successfully <br>1..3: Not implemented (DMI accesses always succeed)</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="bypass-register-bypass">9.1.1.4 BYPASS Register (BYPASS)<a class="headerlink" href="#bypass-register-bypass" title="Link to this heading">¶</a></h4>
<p>The BYPASS register is a standard JTAG register.
It is implemented as a 1-bit register which has no functional effect, except adding a 1-bit delay.
It allows a debugger to not communicate with this TAP (i.e., bypass it).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All unused addresses in the 5-bit JTAG address space (i.e., all addresses except 0x01 (IDCODE), 0x10 (dtmcs), and 0x11 (dmi)) select the BYPASS register as well.</p>
</div>
<p>This register is mapped to the 5-bit JTAG address space.</p>
<table class="docutils data align-default" id="id5">
<caption><span class="caption-text">Table 9-5 BYPASS Register (BYPASS, at JTAG 0x1F)</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bypass</p></td>
<td><p>0</p></td>
<td><p>Bypass</p></td>
<td><p>—</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="control-status-registers-in-debug-module-interface-address-space">9.1.2 Control/Status Registers in Debug Module Interface Address Space<a class="headerlink" href="#control-status-registers-in-debug-module-interface-address-space" title="Link to this heading">¶</a></h3>
<p>Table 9-6 Summarizes The Control/Status Registers In The Debug Module Interface Address Space.</p>
<p>Registers in the Debug Module Interface address space are accessed through the dmi register in the JTAG address space (see Section 9.1.1.3).
The <em>address</em> field of the dmi register selects the Debug Module Interface register to be accessed, the <em>data</em> field either provides the value to be written to the selected register or captures that register’s value, and the op field selects the operation to be performed.</p>
<p>Addresses shown below are offsets relative to the Debug Module base address. VeeR EL2 supports a single Debug Module with a base address of 0x00.</p>
<table class="docutils data align-default" id="id6">
<caption><span class="caption-text">Table 9-6 Registers in Debug Module Interface Address Space</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>DMI Address</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Section</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x04</p></td>
<td><p>data0</p></td>
<td><p>Abstract data 0</p></td>
<td><p>9.1.2.7</p></td>
</tr>
<tr class="row-odd"><td><p>0x05</p></td>
<td><p>data1</p></td>
<td><p>Abstract data 1</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>dmcontrol</p></td>
<td><p>Debug module control</p></td>
<td><p>9.1.2.1</p></td>
</tr>
<tr class="row-odd"><td><p>0x11</p></td>
<td><p>dmstatus</p></td>
<td><p>Debug module status</p></td>
<td><p>9.1.2.2</p></td>
</tr>
<tr class="row-even"><td><p>0x16</p></td>
<td><p>abstractcs</p></td>
<td><p>Abstract control and status</p></td>
<td><p>9.1.2.4</p></td>
</tr>
<tr class="row-odd"><td><p>0x17</p></td>
<td><p>command</p></td>
<td><p>Abstract command</p></td>
<td><p>9.1.2.5</p></td>
</tr>
<tr class="row-even"><td><p>0x18</p></td>
<td><p>abstractauto</p></td>
<td><p>Abstract command autoexec</p></td>
<td><p>9.1.2.6</p></td>
</tr>
<tr class="row-odd"><td><p>0x38</p></td>
<td><p>sbcs</p></td>
<td><p>System bus access control and status</p></td>
<td><p>9.1.2.8</p></td>
</tr>
<tr class="row-even"><td><p>0x39</p></td>
<td><p>sbaddress0</p></td>
<td><p>System bus address 31:0</p></td>
<td><p>9.1.2.9</p></td>
</tr>
<tr class="row-odd"><td><p>0x3C</p></td>
<td><p>sbdata0</p></td>
<td><p>System bus data 31:0</p></td>
<td><p>9.1.2.10</p></td>
</tr>
<tr class="row-even"><td><p>0x3D</p></td>
<td><p>sbdata1</p></td>
<td><p>System bus data 63:32</p></td>
<td><p>9.1.2.11</p></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p>haltsum0</p></td>
<td><p>Halt summary 0</p></td>
<td><p>9.1.2.3</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ICCM, DCCM, and PIC memory ranges are only accessible using the access memory abstract command.</p>
</div>
<h3 id="debug-module-control-register-dmcontrol">9.1.2.1 Debug Module Control Register (dmcontrol)<a class="headerlink" href="#debug-module-control-register-dmcontrol" title="Link to this heading">¶</a></h3>
<p>The dmcontrol register controls the overall Debug Module as well as the hart.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On any given write, a debugger may only write ‘1’ to either the resumereq or <em>ackhavereset</em> bit. The other bit must be written to ‘0’.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id7">
<caption><span class="caption-text">Table 9-7 Debug Module Control Register (dmcontrol, at Debug Module Offset 0x10)</span><a class="headerlink" href="#id7" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>haltreq</p></td>
<td><p>31</p></td>
<td><p>Halt request:  0: Clears halt request bit  Note: May cancel outstanding halt request.  1: Sets halt request bit  Note: Running hart halts whenever halt request bit is set.</p></td>
<td><p>R0/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>resumereq</p></td>
<td><p>30</p></td>
<td><p>Resume request:  0: No effect  1: Causes hart to resume, if halted  Note: Also clears resume ack bit for hart.  Note: Setting resumereq bit is ignored if haltreq bit is set.</p></td>
<td><p>R0/W1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>hartreset</p></td>
<td><p>29</p></td>
<td><p>Not implemented (i.e., 0: Deasserted)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>ackhavereset</p></td>
<td><p>28</p></td>
<td><p>Reset core-internal, sticky havereset state: <br> 0: No effect  <br> 1: Clear havereset state</p></td>
<td><p>R0/W1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>27</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>hasel</p></td>
<td><p>26</p></td>
<td><p>Selects definition of currently selected harts: 0: Single currently selected hart (VeeR EL2 is single-thread)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>hartsello</p></td>
<td><p>25:16</p></td>
<td><p>Not implemented (VeeR EL2 is single-thread)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>hartselhi</p></td>
<td><p>15:6</p></td>
<td><p>Not implemented (VeeR EL2 is single-thread)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>5:4</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>setresethaltreq</p></td>
<td><p>3</p></td>
<td><p>Not implemented Note: hasresethaltreq bit in dmstatus register (Table 9-8) is ‘0’.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>clrresethaltreq</p></td>
<td><p>2</p></td>
<td><p>Not implemented Note: hasresethaltreq bit in dmstatus register (Table 9-8) is ‘0’.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>ndmreset</p></td>
<td><p>1</p></td>
<td><p>Controls reset signal from DM to VeeR EL2 core. Signal resets hart, but not DM. To perform a reset, debugger writes ‘1’, and then writes ‘0’ to deassert reset.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>dmactive</p></td>
<td><p>0</p></td>
<td><p>Reset signal for Debug Module (DM): 0:<br> Module’s state takes its reset values <br>Note: Only dmactive bit may be written to value other than its reset value. Writes to all other bits of this register are ignored. <br>1: Module functions normally <br>Debugger may pulse this bit low to get Debug Module into known state. <br>Note: The core complex’s dbg_rst_l signal (see Table 15-1) resets the Debug Module. It should only be used to reset the Debug Module at power up or possibly with a global reset signal which resets the entire platform.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="debug-module-status-register-dmstatus">9.1.2.2 Debug Module Status Register (dmstatus)<a class="headerlink" href="#debug-module-status-register-dmstatus" title="Link to this heading">¶</a></h4>
<p>The dmstatus register reports status for the overall Debug Module as well as the hart.</p>
<p>This register is read-only.</p>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id8">
<caption><span class="caption-text">Table 9-8 Debug Module Status Register (dmstatus, at Debug Module Offset 0x11)</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:23</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>impebreak</p></td>
<td><p>22</p></td>
<td><p>Not implemented  Note: VeeR EL2 does not implement a Program Buffer.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>21:20</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>allhavereset</p></td>
<td><p>19</p></td>
<td><p>‘1’ when hart has been reset and reset has not been acknowledged</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-even"><td><p>anyhavereset</p></td>
<td><p>18</p></td>
<td><p>‘1’ when hart has been reset and reset has not been acknowledged</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-odd"><td><p>allresumeack</p></td>
<td><p>17</p></td>
<td><p>‘1’ when hart has acknowledged last resume request</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-even"><td><p>anyresumeack</p></td>
<td><p>16</p></td>
<td><p>‘1’ when hart has acknowledged last resume request</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-odd"><td><p>allnonexistent</p></td>
<td><p>15</p></td>
<td><p>Not implemented (VeeR EL2 is single-thread)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>anynonexistent</p></td>
<td><p>14</p></td>
<td><p>Not implemented (VeeR EL2 is single-thread)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>allunavail</p></td>
<td><p>13</p></td>
<td><p>‘1’ when hart is unavailable40</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-even"><td><p>anyunavail</p></td>
<td><p>12</p></td>
<td><p>‘1’ when hart is unavailable40</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-odd"><td><p>allrunning</p></td>
<td><p>11</p></td>
<td><p>‘1’ when hart is running</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-even"><td><p>anyrunning</p></td>
<td><p>10</p></td>
<td><p>‘1’ when hart is running</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-odd"><td><p>allhalted</p></td>
<td><p>9</p></td>
<td><p>‘1’ when hart is halted</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-even"><td><p>anyhalted</p></td>
<td><p>8</p></td>
<td><p>‘1’ when hart is halted</p></td>
<td><p>R</p></td>
<td><p>–</p></td>
</tr>
<tr class="row-odd"><td><p>authenticated</p></td>
<td><p>7</p></td>
<td><p>Not implemented (i.e., 1: Always authenticated)</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>authbusy</p></td>
<td><p>6</p></td>
<td><p>Not implemented (i.e., 0: Authentication module never busy)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>hasresethaltreq</p></td>
<td><p>5</p></td>
<td><p>Not implemented  Note: VeeR EL2 implements halt-on-reset with haltreq set out of  reset method.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>confstrptrvalid</p></td>
<td><p>4</p></td>
<td><p>Not implemented  Note: VeeR EL2 does not provide information relevant to  configuration string.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>version</p></td>
<td><p>3:0</p></td>
<td><p>Debug Module present, conforming to RISC-V Debug specification Version 0.13.2</p></td>
<td><p>R</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
<h4 id="halt-summary-0-register-haltsum0">9.1.2.3 Halt Summary 0 Register (haltsum0)<a class="headerlink" href="#halt-summary-0-register-haltsum0" title="Link to this heading">¶</a></h4>
<p>Each bit in the haltsum0 register indicates whether a specific hart is halted or not.
Since VeeR EL2 is singlethreaded, only one bit is implemented.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unavailable/nonexistent harts are not considered to be halted.</p>
</div>
<p>This register is read-only.</p>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id9">
<caption><span class="caption-text">Table 9-9 Halt Summary 0 Register (haltsum0, at Debug Module Offset 0x40)</span><a class="headerlink" href="#id9" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:1</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>halted</p></td>
<td><p>0</p></td>
<td><p>‘1’ when hart halted</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="abstract-control-and-status-register-abstractcs">9.1.2.4 Abstract Control and Status Register (abstractcs)<a class="headerlink" href="#abstract-control-and-status-register-abstractcs" title="Link to this heading">¶</a></h4>
<p>The abstractcs register provides status information of the abstract command interface and enables clearing of detected command errors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Writing this register while an abstract command is executing causes its <em>cmderr</em> field to be set to ‘1’ (i.e., ‘busy’), if it is ‘0’.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id10">
<caption><span class="caption-text">Table 9-10 Abstract Control and Status Register (abstractcs, at Debug Module Offset 0x16)</span><a class="headerlink" href="#id10" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:29</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>progbufsize</p></td>
<td><p>28:24</p></td>
<td><p>Not implemented Note: VeeR EL2 does not implement a Program Buffer.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>23:13</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>busy</p></td>
<td><p>12</p></td>
<td><p>Abstract command interface activity: 0: Abstract command interface idle 1: Abstract command currently being executed Note: ‘Busy’ indication set when command register (see Section 9.1.2.5) is written, cleared after command has completed.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>11</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>cmderr</p></td>
<td><p>10:8</p></td>
<td><p>Set if abstract command fails.<br> Reason for failure:<br> 0 (none): No error <br>1 (busy): Abstract command was executing when command, abstractcs, or abstractauto register was written, or when data0 or data1 register was read or written <br>2 (not supported): Requested command or option not supported, regardless of whether hart is running or not (i.e., illegal command, access register command not word-sized or postexec bit set, or access memory command size larger than word) <br>3 (exception): Exception occurred while executing abstract command (i.e., illegal register address, address outside of ICCM/DCCM/PIC memory range but in internal memory region, ICCM/DCCM uncorrectable ECC error, or ICCM/PIC access not word-sized) <br>4 (halt/resume): Abstract command couldn’t execute because hart wasn’t in required state (running/halted), or unavailable <br>5 (bus): Abstract command failed for SoC memory access due to bus error (e.g., unmapped address, uncorrectable error, incorrect alignment, or unsupported access size) <br>6: Reserved <br>7 (other): Register or memory access size not 32 bits wide or unaligned <br>Note: Bits in this field remain set until cleared by writing ‘111’. <br>Note: Next abstract command not started until value is reset to ‘0’. <br>Note: Only contains valid value if busy is ‘0’.</p></td>
<td><p>R/W1C</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>7:4</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>datacount</p></td>
<td><p>3:0</p></td>
<td><p>2 data registers implemented as part of abstract command interface</p></td>
<td><p>R</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
<h3 id="abstract-command-register-command">9.1.2.5 Abstract Command Register (command)<a class="headerlink" href="#abstract-command-register-command" title="Link to this heading">¶</a></h3>
<p>Writes to the command register cause the corresponding abstract command to be executed.</p>
<p>Writing this register while an abstract command is executing causes the <em>cmderr</em> field in the abstractcs register (see Section 9.1.2.4) to be set to ‘1’ (i.e., ‘busy’), if it is ‘0’.
If the <em>cmderr</em> field is non-zero, writes to the command register are ignored.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A non-zero <em>cmderr</em> field inhibits starting a new abstract command to accommodate debuggers which, for performance reasons, may send several commands to be executed in a row without checking the <em>cmderr</em> field in between. Checking the <em>cmderr</em> field only at the end of a sequence of commands is safe because later commands which might depend on a previous, but failed command are not executed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Access register and access memory abstract commands may only be executed when the core is in the debug halt (db-halt) state. If the debugger is requesting the execution of an abstract command while the core is not in the debug halt state, the command is aborted and the <em>cmderr</em> field is set to ‘4’ (i.e., ‘halt/resume’), if it is ‘0’.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The access memory abstract command method provides access to ICCM, DCCM, and PIC memory ranges as well as to SoC memories.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id11">
<caption><span class="caption-text">Table 9-11 Abstract Command Register (command, at Debug Module Offset 0x17)</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cmdtype</p></td>
<td><p>31:24</p></td>
<td><p>Abstract command type: <br>0: Access Register Command <br>2: Access Memory Command <br>Note: Other values not implemented or reserved for future use. Writing this field to value different than ‘0’ or ‘2’ causes abstract command to fail and cmderr field of abstractcs register to be set to ‘2’.</p></td>
<td><p>R0/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p></p></td>
<td><p><strong>Access Register Command</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>23</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>aarsize</p></td>
<td><p>22:20</p></td>
<td><p>Register access size: <br>2: 32-bit access <br>Note: Other size values not implemented. Writing this field to value different than ‘2’ causes abstract command to fail and cmderr field of abstractcs register to be set to ‘2’, except if transfer is ‘0’.</p></td>
<td><p>R/W</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>aarpostincrement</p></td>
<td><p>19</p></td>
<td><p>Access register post-increment control: <br>0: No post-increment <br>1: After every successful access register command completion, increment regno field (wrapping around to 0)</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>postexec</p></td>
<td><p>18</p></td>
<td><p>Not implemented (i.e., 0: No effect) <br>Note: Writing to ‘1’ causes abstract command to fail and cmderr field of abstractcs register to be set to ‘2’.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>transfer</p></td>
<td><p>17</p></td>
<td><p>Transfer: <br>0: Do not perform operation specified by write Note: Selection of unimplemented options (except for aarsize and regno fields) causes cmderr field of abstractcs register to be set to ‘2’. <br>1: Perform operation specified by write <br>Note: Selection of unimplemented options causes abstract command to fail and cmderr field of abstractcs register to be set to ‘2’.</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>write</p></td>
<td><p>16</p></td>
<td><p>Read or write register: <br>0 (read): Copy data from register specified in regno field into data0 register (Section 9.1.2.7) <br>1 (write): Copy data from data0 register (Section 9.1.2.7) into register specified in regno field</p></td>
<td><p>R0/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>regno</p></td>
<td><p>15:0</p></td>
<td><p>Register access: <br>0x0000 - 0x0FFF: CSRs <br>0x1000 - 0x101F: GPRs <br>0x1020 - 0xFFFF: Not implemented or reserved <br>Note: Selecting illegal register address causes abstract command to fail and cmderr field of abstractcs register to be set to ‘3’, except if transfer is ‘0’.</p></td>
<td><p>R0/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p></p></td>
<td><p><strong>Access Memory Command (ICCM, DCCM, PIC, and SoC Memories)</strong></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>aamvirtual</p></td>
<td><p>23</p></td>
<td><p>Not implemented (i.e., 0: Addresses are physical) <br>Note: VeeR EL2 supports physical addresses only. Since physical and virtual address are identical, no error is flagged41 even if written to ‘1’.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>aamsize</p></td>
<td><p>22:20</p></td>
<td><p>Memory access size: <br>0: 8-bit access (for DCCM and SoC memories) <br>1: 16-bit access (for DCCM and SoC memories) <br>2: 32-bit access (for ICCM, DCCM, PIC, and SoC memories) <br>Note: Writing this field to value ‘0’ or ‘1’ for ICCM or PIC memory access causes abstract command to fail and cmderr field of abstractcs register to be set to ‘3’. <br>Note: Other size values not implemented. Writing this field to value higher than ‘2’ causes abstract command to fail and cmderr field of abstractcs register to be set to ‘2’.</p></td>
<td><p>R/W</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>aampostincrement</p></td>
<td><p>19</p></td>
<td><p>Access memory post-increment control: <br>0: No post-increment <br>1: After every successful access memory command completion, increment data1 register (which contains memory address, see Section 9.1.2.7) by number of bytes encoded in aamsize field</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>18:17</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>write</p></td>
<td><p>16</p></td>
<td><p>Read or write memory location: <br>0 (read): Copy data from memory location specified in data1 register (i.e., address) into data0 register (i.e., data) (Section 9.1.2.7) <br>1 (write): Copy data from data0 register (i.e., data) into memory location specified in data1 register (i.e., address) (Section 9.1.2.7)</p></td>
<td><p>R0/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>target-specific</p></td>
<td><p>15:14</p></td>
<td><p>Not implemented <br>Note: VeeR EL2 does not use target-specific bits.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>13:0</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>41 The RISC-V Debug specification [3] states that an implementation must fail accesses that it does not support.
However, the Debug Task Group community agreed in an email exchange on the group’s reflector as well as in a group meeting that not reporting an error is acceptable for implementations without address translation (i.e., the physical address equals the virtual address).</p>
<h4 id="abstract-command-autoexec-register-abstractauto">9.1.2.6 Abstract Command Autoexec Register (abstractauto)<a class="headerlink" href="#abstract-command-autoexec-register-abstractauto" title="Link to this heading">¶</a></h4>
<p>The abstractauto register controls if reading or writing the data0/1 registers (see Section 9.1.2.7) automatically triggers the next execution of the abstract command in the command register (see Section 9.1.2.5).
This feature allows more efficient burst accesses.</p>
<p>Writing this register while an abstract command is executing causes the <em>cmderr</em> field in the abstractcs register (see Section 9.1.2.4) to be set to ‘1’ (i.e., ‘busy’), if it is ‘0’.</p>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id12">
<caption><span class="caption-text">Table 9-12 Abstract Command Autoexec Register (abstractauto, at Debug Module Offset 0x18)</span><a class="headerlink" href="#id12" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:2</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>autoexecdata1</p></td>
<td><p>1</p></td>
<td><p>Auto-execution control for data1 register: 0: No automatic triggering of abstract command execution 1: Reading or writing data1 causes abstract command to be executed again</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>autoexecdata0</p></td>
<td><p>0</p></td>
<td><p>Auto-execution control for data0 register: 0: No automatic triggering of abstract command execution 1: Reading or writing data0 causes abstract command to be executed again</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="abstract-data-0-1-registers-data0-1">9.1.2.7 Abstract Data 0 / 1 Registers (data0/1)<a class="headerlink" href="#abstract-data-0-1-registers-data0-1" title="Link to this heading">¶</a></h3>
<p>The data0/1 registers are basic read/write registers which may be read or changed by abstract commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>datacount</em> field of the abstractcs register (see Table 9-10) indicates that 2 (out of possible 12) registers are implemented in VeeR EL2.</p>
</div>
<p>The data0 register sources the value for and provides the return value of an abstract command.
The data1 register provides the address for an access memory abstract command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Selecting an address outside of the ICCM, DCCM, or PIC memory range but in one of the core-internal memory regions causes the abstract command to fail and the <em>cmderr</em> field of the abstractcs register to be set to ‘3’. Similarly, selecting an unmapped SoC memory address causes the abstract command to fail, provided the SoC responds with a bus error, and the <em>cmderr</em> field of the abstractcs register to be set to ‘5’.</p>
</div>
<p>Accessing these registers while an abstract command is executing causes the <em>cmderr</em> field of the abstractcs register (see Table 9-10) to be set to ‘1’ (i.e., ‘busy’), if it was ‘0’.</p>
<p>Attempts to write the data0/1 registers while the <em>busy</em> bit of the abstractcs register (see Table 9-10) is set does not change their value.</p>
<p>The values in these registers may not be preserved after an abstract command has been executed.
The only guarantees on their contents are the ones offered by the executed abstract command.
If the abstract command fails, no assumptions should be made about the contents of these registers.</p>
<p>These registers are mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id13">
<caption><span class="caption-text">Table 9-13 Abstract Data 0 / 1 Register (data0/1, at Debug Module Offset 0x04 / 0x05)</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>31:0</p></td>
<td><p>Abstract command data:  data0: data value (access register and access memory command)  data1: address (access memory command)</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="system-bus-access-control-and-status-register-sbcs">9.1.2.8 System Bus Access Control and Status Register (sbcs)<a class="headerlink" href="#system-bus-access-control-and-status-register-sbcs" title="Link to this heading">¶</a></h4>
<p>The sbcs register provides controls and status information of the system bus access interface.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The system bus access method provides access to SoC memories only. Access to ICCM, DCCM, and PIC memory ranges is only available using the access memory abstract command method.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The operation of the system bus access method does not depend on the core’s state. SoC memory locations may be accessed using this method even when the core is running.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id14">
<caption><span class="caption-text">Table 9-14 System Bus Access Control and Status Register (sbcs, at Debug Module Offset 0x38)</span><a class="headerlink" href="#id14" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sbversion</p></td>
<td><p>31:29</p></td>
<td><p>System Bus interface conforms to RISC-V Debug specification, Version 0.13.2</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>28:23</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>sbbusyerror</p></td>
<td><p>22</p></td>
<td><p>Set when debugger attempts to read data while a read is in progress, or when debugger initiates a new access while one is still in progress (i.e., while sbbusy bit is set). Remains set until explicitly cleared by debugger. <br>Note: When set, Debug Module cannot initiate more system bus accesses.</p></td>
<td><p>R/W1C</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>sbbusy</p></td>
<td><p>21</p></td>
<td><p>System bus master interface status: <br>0: System bus master idle <br>1: System bus master busy (Set when read or write access requested, remains set until access fully completed) <br>Note: Writes to this register while sbbusy bit is set result in undefined behavior. Debugger must not write this register until it reads sbbusy bit as ‘0’. <br>Note: Bit reflects if system bus master interface is busy, not status of system bus itself.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>sbreadonaddr</p></td>
<td><p>20</p></td>
<td><p>Auto-read on address write: <br>0: No auto-read on address write <br>1: Every write to sbaddress0 (see Section 9.1.2.9) automatically triggers system bus read at new address</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>sbaccess</p></td>
<td><p>19:17</p></td>
<td><p>Access size for system bus access: <br>0: 8-bit access <br>1: 16-bit access <br>2: 32-bit access <br>3: 64-bit access <br>Note: Other values not supported. No access performed, sberror field set to ‘4’.</p></td>
<td><p>R/W</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>sbautoincrement</p></td>
<td><p>16</p></td>
<td><p>Auto-address increment: <br>0: No auto-address increment<br> 1: sbaddress0 register (see Section 9.1.2.9) incremented by access size (in bytes) selected in sbaccess field after every successful system bus access</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>sbreadondata</p></td>
<td><p>15</p></td>
<td><p>Auto-read on data read: <br>0: No auto-read on data read <br>1: Every read from sbdata0 register (see Section 9.1.2.10) automatically triggers new system bus read at (possibly auto- incremented) address</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>sberror</p></td>
<td><p>14:12</p></td>
<td><p>Set when Debug Module’s system bus master encounters an error: While this field is non-zero, no more system bus accesses can be initiated by the Debug Module. <br>0: No bus error <br>1: Not implemented (no timeout) <br>2: Bad address accessed <br>3: Alignment error <br>4: Access of unsupported size requested <br>5..7: Not implemented (no other error conditions) <br>Note: Bits in this field remain set until cleared by writing ‘111’. <br>Note: Debug Module may not initiate next system bus access until value is reset to ‘0’.</p></td>
<td><p>R/W1C</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>sbasize</p></td>
<td><p>11:5</p></td>
<td><p>Width of system bus addresses (in bits)</p></td>
<td><p>R</p></td>
<td><p>32</p></td>
</tr>
<tr class="row-even"><td><p>sbaccess128</p></td>
<td><p>4</p></td>
<td><p>128-bit system bus accesses not supported</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>sbaccess64</p></td>
<td><p>3</p></td>
<td><p>64-bit system bus accesses supported</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>sbaccess32</p></td>
<td><p>2</p></td>
<td><p>32-bit system bus accesses supported</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>sbaccess16</p></td>
<td><p>1</p></td>
<td><p>16-bit system bus accesses supported</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>sbaccess8</p></td>
<td><p>0</p></td>
<td><p>8-bit system bus accesses supported</p></td>
<td><p>R</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<h4 id="system-bus-address-31-0-register-sbaddress0">9.1.2.9 System Bus Address 31:0 Register (sbaddress0)<a class="headerlink" href="#system-bus-address-31-0-register-sbaddress0" title="Link to this heading">¶</a></h4>
<p>The sbaddress0 register provides the address of the system bus access.</p>
<p>If the <em>sbreadonaddr</em> bit of the sbcs register is ‘1’, writing the sbaddress0 register triggers a system bus read access from the new address.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>sberror</em> and <em>sbbusyerror</em> fields of the sbcs register must both be ‘0’ for a system bus read operation to be performed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the system bus master interface is busy (i.e., <em>sbbusy</em> bit of the sbcs register is ‘1’) when a write access to this register is performed, the <em>sbbusyerror</em> bit in the sbcs register is set and the access is aborted.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id15">
<caption><span class="caption-text">Table 9-15 System Bus Address 31:0 Register (sbaddress0, at Debug Module Offset 0x39)</span><a class="headerlink" href="#id15" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>address</p></td>
<td><p>31:0</p></td>
<td><p>System bus address</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="system-bus-data-31-0-register-sbdata0">9.1.2.10 System Bus Data 31:0 Register (sbdata0)<a class="headerlink" href="#system-bus-data-31-0-register-sbdata0" title="Link to this heading">¶</a></h4>
<p>The sbdata0 register holds the right-justified lower bits for system bus read and write accesses.</p>
<p>A successful system bus read updates the sbdata0/1 registers with the value read from the system bus at the memory location addressed by the sbaddress0 register.
If the width of the read access is less than 64 bits, the remaining high bits may take on any value.</p>
<p>Reading the sbdata0 register provides the current value of this register.
If the s<em>breadondata</em> bit of the sbcs register is ‘1’, reading this register also triggers a system bus read access which updates the sbdata0/1 registers with the value read from the memory location addressed by the sbaddress0 register.</p>
<p>Writing the sbdata0 register triggers a system bus write access which updates the memory location addressed by the sbaddress0 register with the new values in the sbdata0/1 registers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only the sbdata0 register has this behavior. Accessing the sbdata1 register has no side effects.
A debugger must access the sbdata1 register first, before accessing the sbdata0 register.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>sberror</em> and <em>sbbusyerror</em> fields of the sbcs register must both be ‘0’ for a system bus read or write operation to be performed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the system bus master interface is busy (i.e., <em>sbbusy</em> bit of the sbcs register is ‘1’) when a read or write access to this register is performed, the <em>sbbusyerror</em> bit in the sbcs register is set and the access is aborted.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id16">
<caption><span class="caption-text">Table 9-16 System Bus Data 31:0 Register (sbdata0, at Debug Module Offset 0x3C)</span><a class="headerlink" href="#id16" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>31:0</p></td>
<td><p>System bus data[31:0] for system bus read and write accesses</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="system-bus-data-63-32-register-sbdata1">9.1.2.11 System Bus Data 63:32 Register (sbdata1)<a class="headerlink" href="#system-bus-data-63-32-register-sbdata1" title="Link to this heading">¶</a></h4>
<p>The sbdata1 register holds the upper 32 bits of the 64-bit wide system bus for read and write accesses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the system bus master interface is busy (i.e., <em>sbbusy</em> bit of the sbcs register is ‘1’) when a read or write access to this register is performed, the <em>sbbusyerror</em> bit in the sbcs register is set and the access is aborted.</p>
</div>
<p>This register is mapped to the Debug Module Interface address space.</p>
<table class="docutils data align-default" id="id17">
<caption><span class="caption-text">Table 9-17 System Bus Data 63:32 Register (sbdata1, at Debug Module Offset 0x3D)</span><a class="headerlink" href="#id17" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>data</p></td>
<td><p>31:0</p></td>
<td><p>System bus data[63:32] for system bus read and write accesses</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h3 id="control-status-registers-in-risc-v-csr-address-space">9.1.3 Control/Status Registers in RISC-V CSR Address Space<a class="headerlink" href="#control-status-registers-in-risc-v-csr-address-space" title="Link to this heading">¶</a></h3>
<p>A summary of standard RISC-V control/status registers with platform-specific adaptations in CSR space:</p>
<ul class="simple">
<li><p>Trigger Select Register (tselect) (see Section 9.1.3.1)</p></li>
<li><p>Trigger Data 1 Register (tdata1) (see Section 9.1.3.2)</p></li>
<li><p>Match Control Register (mcontrol) (see Section 9.1.3.3)</p></li>
<li><p>Trigger Data 2 Register (tdata2) (see Section 9.1.3.4)</p></li>
<li><p>Debug Control and Status Register (dcsr) (see Section 9.1.3.5)</p></li>
<li><p>Debug PC Register (dpc) (see Section 9.1.3.6)</p></li>
</ul>
<p>All reserved and unused bits in these control/status registers must be hardwired to ‘0’.
Unless otherwise noted, all read/write control/status registers must have WARL (Write Any value, Read Legal value) behavior.</p>
<h4 id="trigger-select-register-tselect">9.1.3.1 Trigger Select Register (tselect)<a class="headerlink" href="#trigger-select-register-tselect" title="Link to this heading">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since triggers can be used both by Debug Mode and M-mode, the debugger must restore this register if it modified it.</p>
</div>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id18">
<caption><span class="caption-text">Table 9-18 Trigger Select Register (tselect, at CSR 0x7A0)</span><a class="headerlink" href="#id18" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>31:2</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>index</p></td>
<td><p>1:0</p></td>
<td><p>Index of trigger 0..3  Note: Triggers 0 and 2 may be chained, triggers 1 and 3 not.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="trigger-data-1-register-tdata1">9.1.3.2 Trigger Data 1 Register (tdata1)<a class="headerlink" href="#trigger-data-1-register-tdata1" title="Link to this heading">¶</a></h4>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id19">
<caption><span class="caption-text">Table 9-19 Trigger Data 1 Register (tdata1, at CSR 0x7A1)</span><a class="headerlink" href="#id19" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>31:28</p></td>
<td><p>See Table 9-20, “Match Control Register (mcontrol, at CSR 0x7A1)” below.</p></td>
<td><p>R</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>dmode</p></td>
<td><p>27</p></td>
<td><p>See Table 9-20, “Match Control Register (mcontrol, at CSR 0x7A1)” below.</p></td>
<td><p>See Table 9-20, “Match Control Register (mcontrol, at CSR 0x7A1)” below.</p></td>
<td><p>See Table 9-20, “Match Control Register (mcontrol, at CSR 0x7A1)” below.</p></td>
</tr>
</tbody>
</table>
<h4 id="match-control-register-mcontrol">9.1.3.3 Match Control Register (mcontrol)<a class="headerlink" href="#match-control-register-mcontrol" title="Link to this heading">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>VeeR EL2 does not support triggering on the data of a load or on the opcode of an executed instruction.</p>
</div>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id20">
<caption><span class="caption-text">Table 9-20 Match Control Register (mcontrol, at CSR 0x7A1)</span><a class="headerlink" href="#id20" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type</p></td>
<td><p>31:28</p></td>
<td><p>Address/data match trigger (= mcontrol)</p></td>
<td><p>R</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>dmode</p></td>
<td><p>27</p></td>
<td><p>Mode write privileges to tdata1/2 registers (Sections 9.1.3.2 and 9.1.3.4) selected by tselect register (Section 9.1.3.1):<br> 0: Both Debug Mode and M-mode may write tdata1/2 registers selected by tselect register<br> 1: Only Debug Mode may write tdata1/2 registers selected by tselect register. Writes from M-mode are ignored. <br>Note: Only writable from Debug Mode.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>maskmax</p></td>
<td><p>26:21</p></td>
<td><p>2^31 bytes is largest naturally aligned powers-of-two (NAPOT) range supported by hardware when match field is ‘1’.</p></td>
<td><p>R</p></td>
<td><p>31</p></td>
</tr>
<tr class="row-odd"><td><p>hit</p></td>
<td><p>20</p></td>
<td><p>Set by hardware when this trigger matches. Allows to determine which trigger(s) matched. May be set or cleared by trigger’s user at any time. <br>Note: For chained triggers, hit bit of a matching second trigger is not set unless first trigger matches as well.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>select</p></td>
<td><p>19</p></td>
<td><p>Match selection: <br>0: Perform match on address <br>1: Perform match on store data value</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>timing</p></td>
<td><p>18</p></td>
<td><p>Action for this trigger is taken just before instruction that triggered it is committed, but after all preceding instructions are committed. <br>Note: No bus transaction is issued for an execute address trigger hit on a load to a side-effect address.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>sizelo</p></td>
<td><p>17:16</p></td>
<td><p>Match size: <br>0: Trigger attempts to match against access of any size. <br>• Match against address (if select bit is ‘0’) <br>• Match against store data (if select bit is ‘1’) <br>Note: Data is zero extended for byte or halfword stores. <br>Note: If match bit is ‘1’, the mask in the tdata2 register is applied independent of the select bit value (i.e., in address or data matches). <br>Note: Other match size values not implemented.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>action</p></td>
<td><p>15:12</p></td>
<td><p>Action to take when trigger fires: <br>0: Raise breakpoint exception (used when software wants to use trigger module without external debugger attached) <br>1: Enter Debug Mode (only supported when trigger’s dmode bit is ‘1’) <br>Note: Other values reserved for future use. <br>Note: Triggers do not fire if this field is ‘0’ and interrupts are disabled42 (i.e., mie bit of mstatus standard RISC-V register is ‘0’).</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>chain</p></td>
<td><p>11</p></td>
<td><p>Trigger chaining: <br>0: When this trigger matches, the configured action is taken. <br>1: While this trigger does not match, it prevents the trigger with the next index from matching. <br>Note: Supported for triggers 0 and 2 only, attempts to set this bit for triggers 1 and 3 are ignored. <br>Note: In VeeR EL2, only pairs of triggers (i.e., triggers 0/1 and triggers 2/3) are chainable. <br>Note: If chain bit of trigger 0/2 is ‘1’, it is chained to trigger 1/3. Only action field of trigger 1/3 is used (i.e., action field of trigger 0/2 is ignored). The action on second trigger is taken if and only if both triggers in chain match at the same time. <br>Note: Because the chain bit affects the next trigger, hardware resets it to ‘0’ for mcontrol register writes with dmode bit of ‘0’ if the next trigger has a dmode bit of ‘1’. In addition, hardware ignores writes to the mcontrol register which would set the dmode bit to ‘1’ if the previous trigger has both a dmode bit of ‘0’ and a chain bit of ‘1’. Debuggers must avoid the latter case by checking the chain bit of the previous trigger when writing the mcontrol register.</p></td>
<td><p>R/W (for triggers 0 and 2) R (for triggers 1 and 3)</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>match</p></td>
<td><p>10:7</p></td>
<td><p>Match control: <br>0: Matches when value equals tdata2 register’s (Section 9.1.3.4) value43 <br>1: Matches when top M bits of value match top M bits of tdata2 register’s (Section 9.1.3.4) value (M is 31 minus the index of least-significant bit containing 0 in tdata2 register) <br>Note: Other values not implemented or reserved for future use.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>m</p></td>
<td><p>6</p></td>
<td><p>When set, enable this trigger in M-mode</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>5</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>s</p></td>
<td><p>4</p></td>
<td><p>Not implemented (VeeR EL2 is M-mode only)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>u</p></td>
<td><p>3</p></td>
<td><p>Not implemented (VeeR EL2 is M-mode only)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>execute</p></td>
<td><p>2</p></td>
<td><p>When set, trigger fires on address of executed instruction Note: For writes, written to ‘0’ if select bit is written to ‘1’.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>store</p></td>
<td><p>1</p></td>
<td><p>When set, trigger fires on address or data of store</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>load</p></td>
<td><p>0</p></td>
<td><p>When set, trigger fires on address of load Note: For writes, written to ‘0’ if select bit is written to ‘1’.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>42 To enable native debugging of M-mode code, VeeR EL2 implements the simpler but more restrictive solution of preventing triggers with the <em>action</em> field set to ‘0’ (i.e., breakpoint exception) while interrupts are disabled, as described in Section 5.1, ‘Native M-Mode Triggers’ of the RISC-V Debug specification [3].</p>
<p>43 Bit 0 of tdata2 register is ignored for instruction address matches.</p>
<h4 id="trigger-data-2-register-tdata2">9.1.3.4 Trigger Data 2 Register (tdata2)<a class="headerlink" href="#trigger-data-2-register-tdata2" title="Link to this heading">¶</a></h4>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id21">
<caption><span class="caption-text">Table 9-21 Trigger Data 2 Register (tdata2, at CSR 0x7A2)</span><a class="headerlink" href="#id21" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value</p></td>
<td><p>31:0</p></td>
<td><p>Match value:  <br>- Address or data value for match:  <br>- Address of load, store, or executed instruction43 <br>- Data value of store  <br>- Match mask  (see match field of mcontrol register (Table 9-20) set to ‘1’)</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<h4 id="debug-control-and-status-register-dcsr">9.1.3.5 Debug Control and Status Register (dcsr)<a class="headerlink" href="#debug-control-and-status-register-dcsr" title="Link to this heading">¶</a></h4>
<p>The dcsr register controls the behavior and provides status of the hart in Debug Mode.</p>
<p>The RISC-V Debug specification [3], Section 4.8.1 documents some required and several optional features.
Table 9-22 describes the required features, the partial support of optional features in VeeR EL2, and indicates features not supported with “Not implemented”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This register is accessible in <strong>Debug Mode only</strong>.
Attempting to access this register in machine mode raises an illegal instruction exception.</p>
</div>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id22">
<caption><span class="caption-text">Table 9-22 Debug Control and Status Register (dcsr, at CSR 0x7B0)</span><a class="headerlink" href="#id22" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xdebugver</p></td>
<td><p>31:28</p></td>
<td><p>External debug support exists as described in this chapter and [3]</p></td>
<td><p>R</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>27:16</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>ebreakm</p></td>
<td><p>15</p></td>
<td><p>0: ebreak in M-mode behaves as described in RISC-V Privileged  specification [2] <br> 1: ebreak in M-mode enters Debug Mode</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Reserved</p></td>
<td><p>14</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>ebreaks</p></td>
<td><p>13</p></td>
<td><p>Not implemented (VeeR EL2 is M-mode only)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>ebreaku</p></td>
<td><p>12</p></td>
<td><p>Not implemented (VeeR EL2 is M-mode only)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>stepie</p></td>
<td><p>11</p></td>
<td><p>0: Interrupts disabled during single stepping  <br> 1: Interrupts enabled during single stepping  <br> Note: Debugger must not change value while hart is running.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>stopcount</p></td>
<td><p>10</p></td>
<td><p>0: Increment counters as usual  <br> 1: Don’t increment any counters (incl. cycle and instret) while in  Debug Mode or on ebreak entering Debug Mode (referred value for  most debugging scenarios)</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>stoptime</p></td>
<td><p>9</p></td>
<td><p>Increment timers same as in non-debug mode</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>cause</p></td>
<td><p>8:6</p></td>
<td><p>Reason for Debug Mode entry (if multiple reasons in single cycle, set  cause to highest priority):  <br> 1: ebreak instruction was executed (priority 3) <br>  2: Trigger Module caused a breakpoint exception (priority 4, highest) <br>  3: Debugger or MPC interface (see Table 5-4) requested entry to  Debug Mode using haltreq (priority 1) <br>  4: Hart single-stepped because step was set (priority 0, lowest)  <br> 5: Hart halted directly out of reset due to resethaltreq (also acceptable  to report ‘3’) (priority 2)  Other values reserved for future use.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Reserved</p></td>
<td><p>5</p></td>
<td><p>Reserved</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>mprven</p></td>
<td><p>4</p></td>
<td><p>Not implemented (i.e., 0: mprv field in mstatus register ignored in Debug Mode)</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>nmip</p></td>
<td><p>3</p></td>
<td><p>Non-Maskable Interrupt (NMI) pending for hart when set  Note: NMI may indicate a hardware error condition, reliable debugging  may no longer be possible once bit is set.</p></td>
<td><p>R</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>step</p></td>
<td><p>2</p></td>
<td><p>When set and not in Debug Mode, hart only executes single instruction  and enters Debug Mode. If instruction does not complete due to  exception, hart immediately enters Debug Mode before executing trap  handler, with appropriate exception registers set.  Note: Debugger must not change value while hart is running.</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>prv</p></td>
<td><p>1:0</p></td>
<td><p>Indicates privilege level hart was operating in when Debug Mode was entered (3 = M-mode)</p></td>
<td><p>R</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
<h4 id="debug-pc-register-dpc">9.1.3.6 Debug PC Register (dpc)<a class="headerlink" href="#debug-pc-register-dpc" title="Link to this heading">¶</a></h4>
<p>The dpc register provides the debugger information about the program counter (PC) when entering Debug Mode and control where to resume (RISC-V Debug specification [3], Section 4.8.2).</p>
<p>Upon entry to Debug Mode, the dpc register is updated with the address of the next instruction to be executed.
The behavior is described in more detail in Table 9-23 below.</p>
<p>When resuming, the hart’s PC is updated to the address stored in the dpc register. A debugger may write the dpc register to change where the hart resumes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This register is accessible in <strong>Debug Mode only</strong>. Attempting to access this register in machine mode raises an illegal instruction exception.</p>
</div>
<p>This register is mapped to the standard read/write CSR address space.</p>
<table class="docutils data align-default" id="id23">
<caption><span class="caption-text">Table 9-23 Debug PC Register (dpc, at CSR 0x7B1)</span><a class="headerlink" href="#id23" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Bits</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Reset</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dpc</p></td>
<td><p>31:0</p></td>
<td><p>Address captured for:  <br><br>ebreak:  <br>Address of ebreak instruction <br> <br>Single step:  <br>Address of instruction which would be executed next if not in Debug  Mode (i.e., PC + 4 for 32-bit instructions which don’t change  program flow, destination PC on taken jumps/branches, etc.)  <br><br>Trigger module:  <br>If timing (see timing bit in mcontrol register in Table 9-20) is:  <br>0: Address of instruction which caused trigger to fire  <br>1: Address of next instruction to be executed when Debug Mode  was entered  <br><br>Halt request:  <br>Address of next instruction to be executed when Debug Mode was  entered</p></td>
<td><p>R/W</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2024-07-17
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="8-cache.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: 8 Cache Control" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              8 Cache Control
            </div>
          </div>
        </a>
      
      
        
        <a href="10-core-control.html" class="md-footer__link md-footer__link--next" aria-label="Next: 10 Low-Level Core Control" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              10 Low-Level Core Control
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        Copyright &#169; 2024 CHIPS Alliance The Linux Foundation®.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/antmicro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/antmicro" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.1b5b7a2d5891aec19.min.js?v=1e7b0789"></script>
    
  </body>
</html>